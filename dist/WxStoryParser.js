!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.WxStoryParser=e():t.WxStoryParser=e()}(self,(()=>(()=>{var t={932:(t,e,r)=>{"use strict";const i=r(501),n=r(844),o=r(192);t.exports={XMLParser:n,XMLValidator:i,XMLBuilder:o}},849:(t,e)=>{"use strict";const r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",i="["+r+"]["+r+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",n=new RegExp("^"+i+"$");e.isExist=function(t){return void 0!==t},e.isEmptyObject=function(t){return 0===Object.keys(t).length},e.merge=function(t,e,r){if(e){const i=Object.keys(e),n=i.length;for(let o=0;o<n;o++)t[i[o]]="strict"===r?[e[i[o]]]:e[i[o]]}},e.getValue=function(t){return e.isExist(t)?t:""},e.isName=function(t){return!(null==n.exec(t))},e.getAllMatches=function(t,e){const r=[];let i=e.exec(t);for(;i;){const n=[];n.startIndex=e.lastIndex-i[0].length;const o=i.length;for(let t=0;t<o;t++)n.push(i[t]);r.push(n),i=e.exec(t)}return r},e.nameRegexp=i},501:(t,e,r)=>{"use strict";const i=r(849),n={allowBooleanAttributes:!1,unpairedTags:[]};function o(t){return" "===t||"\t"===t||"\n"===t||"\r"===t}function s(t,e){const r=e;for(;e<t.length;e++)if("?"!=t[e]&&" "!=t[e]);else{const i=t.substr(r,e-r);if(e>5&&"xml"===i)return f("InvalidXml","XML declaration allowed only at the start of the document.",m(t,e));if("?"==t[e]&&">"==t[e+1]){e++;break}}return e}function a(t,e){if(t.length>e+5&&"-"===t[e+1]&&"-"===t[e+2]){for(e+=3;e<t.length;e++)if("-"===t[e]&&"-"===t[e+1]&&">"===t[e+2]){e+=2;break}}else if(t.length>e+8&&"D"===t[e+1]&&"O"===t[e+2]&&"C"===t[e+3]&&"T"===t[e+4]&&"Y"===t[e+5]&&"P"===t[e+6]&&"E"===t[e+7]){let r=1;for(e+=8;e<t.length;e++)if("<"===t[e])r++;else if(">"===t[e]&&(r--,0===r))break}else if(t.length>e+9&&"["===t[e+1]&&"C"===t[e+2]&&"D"===t[e+3]&&"A"===t[e+4]&&"T"===t[e+5]&&"A"===t[e+6]&&"["===t[e+7])for(e+=8;e<t.length;e++)if("]"===t[e]&&"]"===t[e+1]&&">"===t[e+2]){e+=2;break}return e}e.validate=function(t,e){e=Object.assign({},n,e);const r=[];let l=!1,c=!1;"\ufeff"===t[0]&&(t=t.substr(1));for(let n=0;n<t.length;n++)if("<"===t[n]&&"?"===t[n+1]){if(n+=2,n=s(t,n),n.err)return n}else{if("<"!==t[n]){if(o(t[n]))continue;return f("InvalidChar","char '"+t[n]+"' is not expected.",m(t,n))}{let p=n;if(n++,"!"===t[n]){n=a(t,n);continue}{let x=!1;"/"===t[n]&&(x=!0,n++);let b="";for(;n<t.length&&">"!==t[n]&&" "!==t[n]&&"\t"!==t[n]&&"\n"!==t[n]&&"\r"!==t[n];n++)b+=t[n];if(b=b.trim(),"/"===b[b.length-1]&&(b=b.substring(0,b.length-1),n--),d=b,!i.isName(d)){let e;return e=0===b.trim().length?"Invalid space after '<'.":"Tag '"+b+"' is an invalid name.",f("InvalidTag",e,m(t,n))}const y=u(t,n);if(!1===y)return f("InvalidAttr","Attributes for '"+b+"' have open quote.",m(t,n));let v=y.value;if(n=y.index,"/"===v[v.length-1]){const r=n-v.length;v=v.substring(0,v.length-1);const i=g(v,e);if(!0!==i)return f(i.err.code,i.err.msg,m(t,r+i.err.line));l=!0}else if(x){if(!y.tagClosed)return f("InvalidTag","Closing tag '"+b+"' doesn't have proper closing.",m(t,n));if(v.trim().length>0)return f("InvalidTag","Closing tag '"+b+"' can't have attributes or invalid starting.",m(t,p));{const e=r.pop();if(b!==e.tagName){let r=m(t,e.tagStartPos);return f("InvalidTag","Expected closing tag '"+e.tagName+"' (opened in line "+r.line+", col "+r.col+") instead of closing tag '"+b+"'.",m(t,p))}0==r.length&&(c=!0)}}else{const i=g(v,e);if(!0!==i)return f(i.err.code,i.err.msg,m(t,n-v.length+i.err.line));if(!0===c)return f("InvalidXml","Multiple possible root nodes found.",m(t,n));-1!==e.unpairedTags.indexOf(b)||r.push({tagName:b,tagStartPos:p}),l=!0}for(n++;n<t.length;n++)if("<"===t[n]){if("!"===t[n+1]){n++,n=a(t,n);continue}if("?"!==t[n+1])break;if(n=s(t,++n),n.err)return n}else if("&"===t[n]){const e=h(t,n);if(-1==e)return f("InvalidChar","char '&' is not expected.",m(t,n));n=e}else if(!0===c&&!o(t[n]))return f("InvalidXml","Extra text at the end",m(t,n));"<"===t[n]&&n--}}}var d;return l?1==r.length?f("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",m(t,r[0].tagStartPos)):!(r.length>0)||f("InvalidXml","Invalid '"+JSON.stringify(r.map((t=>t.tagName)),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):f("InvalidXml","Start tag expected.",1)};const l='"',c="'";function u(t,e){let r="",i="",n=!1;for(;e<t.length;e++){if(t[e]===l||t[e]===c)""===i?i=t[e]:i!==t[e]||(i="");else if(">"===t[e]&&""===i){n=!0;break}r+=t[e]}return""===i&&{value:r,index:e,tagClosed:n}}const d=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function g(t,e){const r=i.getAllMatches(t,d),n={};for(let t=0;t<r.length;t++){if(0===r[t][1].length)return f("InvalidAttr","Attribute '"+r[t][2]+"' has no space in starting.",x(r[t]));if(void 0!==r[t][3]&&void 0===r[t][4])return f("InvalidAttr","Attribute '"+r[t][2]+"' is without value.",x(r[t]));if(void 0===r[t][3]&&!e.allowBooleanAttributes)return f("InvalidAttr","boolean attribute '"+r[t][2]+"' is not allowed.",x(r[t]));const i=r[t][2];if(!p(i))return f("InvalidAttr","Attribute '"+i+"' is an invalid name.",x(r[t]));if(n.hasOwnProperty(i))return f("InvalidAttr","Attribute '"+i+"' is repeated.",x(r[t]));n[i]=1}return!0}function h(t,e){if(";"===t[++e])return-1;if("#"===t[e])return function(t,e){let r=/\d/;for("x"===t[e]&&(e++,r=/[\da-fA-F]/);e<t.length;e++){if(";"===t[e])return e;if(!t[e].match(r))break}return-1}(t,++e);let r=0;for(;e<t.length;e++,r++)if(!(t[e].match(/\w/)&&r<20)){if(";"===t[e])break;return-1}return e}function f(t,e,r){return{err:{code:t,msg:e,line:r.line||r,col:r.col}}}function p(t){return i.isName(t)}function m(t,e){const r=t.substring(0,e).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function x(t){return t.startIndex+t[1].length}},192:(t,e,r)=>{"use strict";const i=r(592),n={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function o(t){this.options=Object.assign({},n,t),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=l),this.processTextOrObjNode=s,this.options.format?(this.indentate=a,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function s(t,e,r){const i=this.j2x(t,r+1);return void 0!==t[this.options.textNodeName]&&1===Object.keys(t).length?this.buildTextValNode(t[this.options.textNodeName],e,i.attrStr,r):this.buildObjectNode(i.val,e,i.attrStr,r)}function a(t){return this.options.indentBy.repeat(t)}function l(t){return!!t.startsWith(this.options.attributeNamePrefix)&&t.substr(this.attrPrefixLen)}o.prototype.build=function(t){return this.options.preserveOrder?i(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t={[this.options.arrayNodeName]:t}),this.j2x(t,0).val)},o.prototype.j2x=function(t,e){let r="",i="";for(let n in t)if(void 0===t[n]);else if(null===t[n])"?"===n[0]?i+=this.indentate(e)+"<"+n+"?"+this.tagEndChar:i+=this.indentate(e)+"<"+n+"/"+this.tagEndChar;else if(t[n]instanceof Date)i+=this.buildTextValNode(t[n],n,"",e);else if("object"!=typeof t[n]){const o=this.isAttribute(n);if(o)r+=this.buildAttrPairStr(o,""+t[n]);else if(n===this.options.textNodeName){let e=this.options.tagValueProcessor(n,""+t[n]);i+=this.replaceEntitiesValue(e)}else i+=this.buildTextValNode(t[n],n,"",e)}else if(Array.isArray(t[n])){const r=t[n].length;let o="";for(let s=0;s<r;s++){const r=t[n][s];void 0===r||(null===r?"?"===n[0]?i+=this.indentate(e)+"<"+n+"?"+this.tagEndChar:i+=this.indentate(e)+"<"+n+"/"+this.tagEndChar:"object"==typeof r?this.options.oneListGroup?o+=this.j2x(r,e+1).val:o+=this.processTextOrObjNode(r,n,e):o+=this.buildTextValNode(r,n,"",e))}this.options.oneListGroup&&(o=this.buildObjectNode(o,n,"",e)),i+=o}else if(this.options.attributesGroupName&&n===this.options.attributesGroupName){const e=Object.keys(t[n]),i=e.length;for(let o=0;o<i;o++)r+=this.buildAttrPairStr(e[o],""+t[n][e[o]])}else i+=this.processTextOrObjNode(t[n],n,e);return{attrStr:r,val:i}},o.prototype.buildAttrPairStr=function(t,e){return e=this.options.attributeValueProcessor(t,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&"true"===e?" "+t:" "+t+'="'+e+'"'},o.prototype.buildObjectNode=function(t,e,r,i){if(""===t)return"?"===e[0]?this.indentate(i)+"<"+e+r+"?"+this.tagEndChar:this.indentate(i)+"<"+e+r+this.closeTag(e)+this.tagEndChar;{let n="</"+e+this.tagEndChar,o="";return"?"===e[0]&&(o="?",n=""),r&&-1===t.indexOf("<")?this.indentate(i)+"<"+e+r+o+">"+t+n:!1!==this.options.commentPropName&&e===this.options.commentPropName&&0===o.length?this.indentate(i)+`\x3c!--${t}--\x3e`+this.newLine:this.indentate(i)+"<"+e+r+o+this.tagEndChar+t+this.indentate(i)+n}},o.prototype.closeTag=function(t){let e="";return-1!==this.options.unpairedTags.indexOf(t)?this.options.suppressUnpairedNode||(e="/"):e=this.options.suppressEmptyNode?"/":`></${t}`,e},o.prototype.buildTextValNode=function(t,e,r,i){if(!1!==this.options.cdataPropName&&e===this.options.cdataPropName)return this.indentate(i)+`<![CDATA[${t}]]>`+this.newLine;if(!1!==this.options.commentPropName&&e===this.options.commentPropName)return this.indentate(i)+`\x3c!--${t}--\x3e`+this.newLine;if("?"===e[0])return this.indentate(i)+"<"+e+r+"?"+this.tagEndChar;{let n=this.options.tagValueProcessor(e,t);return n=this.replaceEntitiesValue(n),""===n?this.indentate(i)+"<"+e+r+this.closeTag(e)+this.tagEndChar:this.indentate(i)+"<"+e+r+">"+n+"</"+e+this.tagEndChar}},o.prototype.replaceEntitiesValue=function(t){if(t&&t.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){const r=this.options.entities[e];t=t.replace(r.regex,r.val)}return t},t.exports=o},592:t=>{function e(t,s,a,l){let c="",u=!1;for(let d=0;d<t.length;d++){const g=t[d],h=r(g);let f="";if(f=0===a.length?h:`${a}.${h}`,h===s.textNodeName){let t=g[h];n(f,s)||(t=s.tagValueProcessor(h,t),t=o(t,s)),u&&(c+=l),c+=t,u=!1;continue}if(h===s.cdataPropName){u&&(c+=l),c+=`<![CDATA[${g[h][0][s.textNodeName]}]]>`,u=!1;continue}if(h===s.commentPropName){c+=l+`\x3c!--${g[h][0][s.textNodeName]}--\x3e`,u=!0;continue}if("?"===h[0]){const t=i(g[":@"],s),e="?xml"===h?"":l;let r=g[h][0][s.textNodeName];r=0!==r.length?" "+r:"",c+=e+`<${h}${r}${t}?>`,u=!0;continue}let p=l;""!==p&&(p+=s.indentBy);const m=l+`<${h}${i(g[":@"],s)}`,x=e(g[h],s,f,p);-1!==s.unpairedTags.indexOf(h)?s.suppressUnpairedNode?c+=m+">":c+=m+"/>":x&&0!==x.length||!s.suppressEmptyNode?x&&x.endsWith(">")?c+=m+`>${x}${l}</${h}>`:(c+=m+">",x&&""!==l&&(x.includes("/>")||x.includes("</"))?c+=l+s.indentBy+x+l:c+=x,c+=`</${h}>`):c+=m+"/>",u=!0}return c}function r(t){const e=Object.keys(t);for(let t=0;t<e.length;t++){const r=e[t];if(":@"!==r)return r}}function i(t,e){let r="";if(t&&!e.ignoreAttributes)for(let i in t){let n=e.attributeValueProcessor(i,t[i]);n=o(n,e),!0===n&&e.suppressBooleanAttributes?r+=` ${i.substr(e.attributeNamePrefix.length)}`:r+=` ${i.substr(e.attributeNamePrefix.length)}="${n}"`}return r}function n(t,e){let r=(t=t.substr(0,t.length-e.textNodeName.length-1)).substr(t.lastIndexOf(".")+1);for(let i in e.stopNodes)if(e.stopNodes[i]===t||e.stopNodes[i]==="*."+r)return!0;return!1}function o(t,e){if(t&&t.length>0&&e.processEntities)for(let r=0;r<e.entities.length;r++){const i=e.entities[r];t=t.replace(i.regex,i.val)}return t}t.exports=function(t,r){let i="";return r.format&&r.indentBy.length>0&&(i="\n"),e(t,r,"",i)}},780:(t,e,r)=>{const i=r(849);function n(t,e){let r="";for(;e<t.length&&"'"!==t[e]&&'"'!==t[e];e++)r+=t[e];if(r=r.trim(),-1!==r.indexOf(" "))throw new Error("External entites are not supported");const i=t[e++];let n="";for(;e<t.length&&t[e]!==i;e++)n+=t[e];return[r,n,e]}function o(t,e){return"!"===t[e+1]&&"-"===t[e+2]&&"-"===t[e+3]}function s(t,e){return"!"===t[e+1]&&"E"===t[e+2]&&"N"===t[e+3]&&"T"===t[e+4]&&"I"===t[e+5]&&"T"===t[e+6]&&"Y"===t[e+7]}function a(t,e){return"!"===t[e+1]&&"E"===t[e+2]&&"L"===t[e+3]&&"E"===t[e+4]&&"M"===t[e+5]&&"E"===t[e+6]&&"N"===t[e+7]&&"T"===t[e+8]}function l(t,e){return"!"===t[e+1]&&"A"===t[e+2]&&"T"===t[e+3]&&"T"===t[e+4]&&"L"===t[e+5]&&"I"===t[e+6]&&"S"===t[e+7]&&"T"===t[e+8]}function c(t,e){return"!"===t[e+1]&&"N"===t[e+2]&&"O"===t[e+3]&&"T"===t[e+4]&&"A"===t[e+5]&&"T"===t[e+6]&&"I"===t[e+7]&&"O"===t[e+8]&&"N"===t[e+9]}function u(t){if(i.isName(t))return t;throw new Error(`Invalid entity name ${t}`)}t.exports=function(t,e){const r={};if("O"!==t[e+3]||"C"!==t[e+4]||"T"!==t[e+5]||"Y"!==t[e+6]||"P"!==t[e+7]||"E"!==t[e+8])throw new Error("Invalid Tag instead of DOCTYPE");{e+=9;let i=1,d=!1,g=!1,h="";for(;e<t.length;e++)if("<"!==t[e]||g)if(">"===t[e]){if(g?"-"===t[e-1]&&"-"===t[e-2]&&(g=!1,i--):i--,0===i)break}else"["===t[e]?d=!0:h+=t[e];else{if(d&&s(t,e))e+=7,[entityName,val,e]=n(t,e+1),-1===val.indexOf("&")&&(r[u(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(d&&a(t,e))e+=8;else if(d&&l(t,e))e+=8;else if(d&&c(t,e))e+=9;else{if(!o)throw new Error("Invalid DOCTYPE");g=!0}i++,h=""}if(0!==i)throw new Error("Unclosed DOCTYPE")}return{entities:r,i:e}}},745:(t,e)=>{const r={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(t,e,r){return t}};e.buildOptions=function(t){return Object.assign({},r,t)},e.defaultOptions=r},78:(t,e,r)=>{"use strict";const i=r(849),n=r(311),o=r(780),s=r(153);function a(t){const e=Object.keys(t);for(let r=0;r<e.length;r++){const i=e[r];this.lastEntities[i]={regex:new RegExp("&"+i+";","g"),val:t[i]}}}function l(t,e,r,i,n,o,s){if(void 0!==t&&(this.options.trimValues&&!i&&(t=t.trim()),t.length>0)){s||(t=this.replaceEntitiesValue(t));const i=this.options.tagValueProcessor(e,t,r,n,o);return null==i?t:typeof i!=typeof t||i!==t?i:this.options.trimValues||t.trim()===t?v(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function c(t){if(this.options.removeNSPrefix){const e=t.split(":"),r="/"===t.charAt(0)?"/":"";if("xmlns"===e[0])return"";2===e.length&&(t=r+e[1])}return t}"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,i.nameRegexp);const u=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])([\\s\\S]*?)\\3)?","gm");function d(t,e,r){if(!this.options.ignoreAttributes&&"string"==typeof t){const r=i.getAllMatches(t,u),n=r.length,o={};for(let t=0;t<n;t++){const i=this.resolveNameSpace(r[t][1]);let n=r[t][4],s=this.options.attributeNamePrefix+i;if(i.length)if(this.options.transformAttributeName&&(s=this.options.transformAttributeName(s)),"__proto__"===s&&(s="#__proto__"),void 0!==n){this.options.trimValues&&(n=n.trim()),n=this.replaceEntitiesValue(n);const t=this.options.attributeValueProcessor(i,n,e);o[s]=null==t?n:typeof t!=typeof n||t!==n?t:v(n,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(o[s]=!0)}if(!Object.keys(o).length)return;if(this.options.attributesGroupName){const t={};return t[this.options.attributesGroupName]=o,t}return o}}const g=function(t){t=t.replace(/\r\n?/g,"\n");const e=new n("!xml");let r=e,i="",s="";for(let a=0;a<t.length;a++)if("<"===t[a])if("/"===t[a+1]){const e=x(t,">",a,"Closing Tag is not closed.");let n=t.substring(a+2,e).trim();if(this.options.removeNSPrefix){const t=n.indexOf(":");-1!==t&&(n=n.substr(t+1))}this.options.transformTagName&&(n=this.options.transformTagName(n)),r&&(i=this.saveTextToParentTag(i,r,s));const o=s.substring(s.lastIndexOf(".")+1);if(n&&-1!==this.options.unpairedTags.indexOf(n))throw new Error(`Unpaired tag can not be used as closing tag: </${n}>`);let l=0;o&&-1!==this.options.unpairedTags.indexOf(o)?(l=s.lastIndexOf(".",s.lastIndexOf(".")-1),this.tagsNodeStack.pop()):l=s.lastIndexOf("."),s=s.substring(0,l),r=this.tagsNodeStack.pop(),i="",a=e}else if("?"===t[a+1]){let e=b(t,a,!1,"?>");if(!e)throw new Error("Pi Tag is not closed.");if(i=this.saveTextToParentTag(i,r,s),this.options.ignoreDeclaration&&"?xml"===e.tagName||this.options.ignorePiTags);else{const t=new n(e.tagName);t.add(this.options.textNodeName,""),e.tagName!==e.tagExp&&e.attrExpPresent&&(t[":@"]=this.buildAttributesMap(e.tagExp,s,e.tagName)),this.addChild(r,t,s)}a=e.closeIndex+1}else if("!--"===t.substr(a+1,3)){const e=x(t,"--\x3e",a+4,"Comment is not closed.");if(this.options.commentPropName){const n=t.substring(a+4,e-2);i=this.saveTextToParentTag(i,r,s),r.add(this.options.commentPropName,[{[this.options.textNodeName]:n}])}a=e}else if("!D"===t.substr(a+1,2)){const e=o(t,a);this.docTypeEntities=e.entities,a=e.i}else if("!["===t.substr(a+1,2)){const e=x(t,"]]>",a,"CDATA is not closed.")-2,n=t.substring(a+9,e);if(i=this.saveTextToParentTag(i,r,s),this.options.cdataPropName)r.add(this.options.cdataPropName,[{[this.options.textNodeName]:n}]);else{let t=this.parseTextData(n,r.tagname,s,!0,!1,!0);null==t&&(t=""),r.add(this.options.textNodeName,t)}a=e+2}else{let o=b(t,a,this.options.removeNSPrefix),l=o.tagName,c=o.tagExp,u=o.attrExpPresent,d=o.closeIndex;this.options.transformTagName&&(l=this.options.transformTagName(l)),r&&i&&"!xml"!==r.tagname&&(i=this.saveTextToParentTag(i,r,s,!1));const g=r;if(g&&-1!==this.options.unpairedTags.indexOf(g.tagname)&&(r=this.tagsNodeStack.pop(),s=s.substring(0,s.lastIndexOf("."))),l!==e.tagname&&(s+=s?"."+l:l),this.isItStopNode(this.options.stopNodes,s,l)){let e="";if(c.length>0&&c.lastIndexOf("/")===c.length-1)a=o.closeIndex;else if(-1!==this.options.unpairedTags.indexOf(l))a=o.closeIndex;else{const r=this.readStopNodeData(t,l,d+1);if(!r)throw new Error(`Unexpected end of ${l}`);a=r.i,e=r.tagContent}const i=new n(l);l!==c&&u&&(i[":@"]=this.buildAttributesMap(c,s,l)),e&&(e=this.parseTextData(e,l,s,!0,u,!0,!0)),s=s.substr(0,s.lastIndexOf(".")),i.add(this.options.textNodeName,e),this.addChild(r,i,s)}else{if(c.length>0&&c.lastIndexOf("/")===c.length-1){"/"===l[l.length-1]?(l=l.substr(0,l.length-1),c=l):c=c.substr(0,c.length-1),this.options.transformTagName&&(l=this.options.transformTagName(l));const t=new n(l);l!==c&&u&&(t[":@"]=this.buildAttributesMap(c,s,l)),this.addChild(r,t,s),s=s.substr(0,s.lastIndexOf("."))}else{const t=new n(l);this.tagsNodeStack.push(r),l!==c&&u&&(t[":@"]=this.buildAttributesMap(c,s,l)),this.addChild(r,t,s),r=t}i="",a=d}}else i+=t[a];return e.child};function h(t,e,r){const i=this.options.updateTag(e.tagname,r,e[":@"]);!1===i||("string"==typeof i?(e.tagname=i,t.addChild(e)):t.addChild(e))}const f=function(t){if(this.options.processEntities){for(let e in this.docTypeEntities){const r=this.docTypeEntities[e];t=t.replace(r.regx,r.val)}for(let e in this.lastEntities){const r=this.lastEntities[e];t=t.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const r=this.htmlEntities[e];t=t.replace(r.regex,r.val)}t=t.replace(this.ampEntity.regex,this.ampEntity.val)}return t};function p(t,e,r,i){return t&&(void 0===i&&(i=0===Object.keys(e.child).length),void 0!==(t=this.parseTextData(t,e.tagname,r,!1,!!e[":@"]&&0!==Object.keys(e[":@"]).length,i))&&""!==t&&e.add(this.options.textNodeName,t),t=""),t}function m(t,e,r){const i="*."+r;for(const r in t){const n=t[r];if(i===n||e===n)return!0}return!1}function x(t,e,r,i){const n=t.indexOf(e,r);if(-1===n)throw new Error(i);return n+e.length-1}function b(t,e,r,i=">"){const n=function(t,e,r=">"){let i,n="";for(let o=e;o<t.length;o++){let e=t[o];if(i)e===i&&(i="");else if('"'===e||"'"===e)i=e;else if(e===r[0]){if(!r[1])return{data:n,index:o};if(t[o+1]===r[1])return{data:n,index:o}}else"\t"===e&&(e=" ");n+=e}}(t,e+1,i);if(!n)return;let o=n.data;const s=n.index,a=o.search(/\s/);let l=o,c=!0;if(-1!==a&&(l=o.substr(0,a).replace(/\s\s*$/,""),o=o.substr(a+1)),r){const t=l.indexOf(":");-1!==t&&(l=l.substr(t+1),c=l!==n.data.substr(t+1))}return{tagName:l,tagExp:o,closeIndex:s,attrExpPresent:c}}function y(t,e,r){const i=r;let n=1;for(;r<t.length;r++)if("<"===t[r])if("/"===t[r+1]){const o=x(t,">",r,`${e} is not closed`);if(t.substring(r+2,o).trim()===e&&(n--,0===n))return{tagContent:t.substring(i,r),i:o};r=o}else if("?"===t[r+1])r=x(t,"?>",r+1,"StopNode is not closed.");else if("!--"===t.substr(r+1,3))r=x(t,"--\x3e",r+3,"StopNode is not closed.");else if("!["===t.substr(r+1,2))r=x(t,"]]>",r,"StopNode is not closed.")-2;else{const i=b(t,r,">");i&&((i&&i.tagName)===e&&"/"!==i.tagExp[i.tagExp.length-1]&&n++,r=i.closeIndex)}}function v(t,e,r){if(e&&"string"==typeof t){const e=t.trim();return"true"===e||"false"!==e&&s(t,r)}return i.isExist(t)?t:""}t.exports=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"}},this.addExternalEntities=a,this.parseXml=g,this.parseTextData=l,this.resolveNameSpace=c,this.buildAttributesMap=d,this.isItStopNode=m,this.replaceEntitiesValue=f,this.readStopNodeData=y,this.saveTextToParentTag=p,this.addChild=h}}},844:(t,e,r)=>{const{buildOptions:i}=r(745),n=r(78),{prettify:o}=r(997),s=r(501);t.exports=class{constructor(t){this.externalEntities={},this.options=i(t)}parse(t,e){if("string"==typeof t);else{if(!t.toString)throw new Error("XML data is accepted in String or Bytes[] form.");t=t.toString()}if(e){!0===e&&(e={});const r=s.validate(t,e);if(!0!==r)throw Error(`${r.err.msg}:${r.err.line}:${r.err.col}`)}const r=new n(this.options);r.addExternalEntities(this.externalEntities);const i=r.parseXml(t);return this.options.preserveOrder||void 0===i?i:o(i,this.options)}addEntity(t,e){if(-1!==e.indexOf("&"))throw new Error("Entity value can't have '&'");if(-1!==t.indexOf("&")||-1!==t.indexOf(";"))throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if("&"===e)throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=e}}},997:(t,e)=>{"use strict";function r(t,e,s){let a;const l={};for(let c=0;c<t.length;c++){const u=t[c],d=i(u);let g="";if(g=void 0===s?d:s+"."+d,d===e.textNodeName)void 0===a?a=u[d]:a+=""+u[d];else{if(void 0===d)continue;if(u[d]){let t=r(u[d],e,g);const i=o(t,e);u[":@"]?n(t,u[":@"],g,e):1!==Object.keys(t).length||void 0===t[e.textNodeName]||e.alwaysCreateTextNode?0===Object.keys(t).length&&(e.alwaysCreateTextNode?t[e.textNodeName]="":t=""):t=t[e.textNodeName],void 0!==l[d]&&l.hasOwnProperty(d)?(Array.isArray(l[d])||(l[d]=[l[d]]),l[d].push(t)):e.isArray(d,g,i)?l[d]=[t]:l[d]=t}}}return"string"==typeof a?a.length>0&&(l[e.textNodeName]=a):void 0!==a&&(l[e.textNodeName]=a),l}function i(t){const e=Object.keys(t);for(let t=0;t<e.length;t++){const r=e[t];if(":@"!==r)return r}}function n(t,e,r,i){if(e){const n=Object.keys(e),o=n.length;for(let s=0;s<o;s++){const o=n[s];i.isArray(o,r+"."+o,!0,!0)?t[o]=[e[o]]:t[o]=e[o]}}}function o(t,e){const{textNodeName:r}=e,i=Object.keys(t).length;return 0===i||!(1!==i||!t[r]&&"boolean"!=typeof t[r]&&0!==t[r])}e.prettify=function(t,e){return r(t,e)}},311:t=>{"use strict";t.exports=class{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,e){"__proto__"===t&&(t="#__proto__"),this.child.push({[t]:e})}addChild(t){"__proto__"===t.tagname&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}}},378:(t,e,r)=>{t=r.nmd(t);var i="__lodash_hash_undefined__",n=9007199254740991,o="[object Arguments]",s="[object AsyncFunction]",a="[object Function]",l="[object GeneratorFunction]",c="[object Null]",u="[object Object]",d="[object Proxy]",g="[object Undefined]",h=/^\[object .+?Constructor\]$/,f=/^(?:0|[1-9]\d*)$/,p={};p["[object Float32Array]"]=p["[object Float64Array]"]=p["[object Int8Array]"]=p["[object Int16Array]"]=p["[object Int32Array]"]=p["[object Uint8Array]"]=p["[object Uint8ClampedArray]"]=p["[object Uint16Array]"]=p["[object Uint32Array]"]=!0,p[o]=p["[object Array]"]=p["[object ArrayBuffer]"]=p["[object Boolean]"]=p["[object DataView]"]=p["[object Date]"]=p["[object Error]"]=p[a]=p["[object Map]"]=p["[object Number]"]=p[u]=p["[object RegExp]"]=p["[object Set]"]=p["[object String]"]=p["[object WeakMap]"]=!1;var m,x,b,y="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,v="object"==typeof self&&self&&self.Object===Object&&self,w=y||v||Function("return this")(),N=e&&!e.nodeType&&e,_=N&&t&&!t.nodeType&&t,E=_&&_.exports===N,A=E&&y.process,O=function(){try{return _&&_.require&&_.require("util").types||A&&A.binding&&A.binding("util")}catch(t){}}(),T=O&&O.isTypedArray,j=Array.prototype,P=Function.prototype,S=Object.prototype,I=w["__core-js_shared__"],F=P.toString,C=S.hasOwnProperty,D=(m=/[^.]+$/.exec(I&&I.keys&&I.keys.IE_PROTO||""))?"Symbol(src)_1."+m:"",$=S.toString,k=F.call(Object),z=RegExp("^"+F.call(C).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),V=E?w.Buffer:void 0,L=w.Symbol,U=w.Uint8Array,M=(V&&V.allocUnsafe,x=Object.getPrototypeOf,b=Object,function(t){return x(b(t))}),B=Object.create,R=S.propertyIsEnumerable,W=j.splice,X=L?L.toStringTag:void 0,G=function(){try{var t=gt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),q=V?V.isBuffer:void 0,Y=Math.max,Z=Date.now,Q=gt(w,"Map"),J=gt(Object,"create"),H=function(){function t(){}return function(e){if(!Et(e))return{};if(B)return B(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();function K(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function tt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function et(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function rt(t){var e=this.__data__=new tt(t);this.size=e.size}function it(t,e,r){(void 0!==r&&!xt(t[e],r)||void 0===r&&!(e in t))&&st(t,e,r)}function nt(t,e,r){var i=t[e];C.call(t,e)&&xt(i,r)&&(void 0!==r||e in t)||st(t,e,r)}function ot(t,e){for(var r=t.length;r--;)if(xt(t[r][0],e))return r;return-1}function st(t,e,r){"__proto__"==e&&G?G(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}K.prototype.clear=function(){this.__data__=J?J(null):{},this.size=0},K.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},K.prototype.get=function(t){var e=this.__data__;if(J){var r=e[t];return r===i?void 0:r}return C.call(e,t)?e[t]:void 0},K.prototype.has=function(t){var e=this.__data__;return J?void 0!==e[t]:C.call(e,t)},K.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=J&&void 0===e?i:e,this},tt.prototype.clear=function(){this.__data__=[],this.size=0},tt.prototype.delete=function(t){var e=this.__data__,r=ot(e,t);return!(r<0||(r==e.length-1?e.pop():W.call(e,r,1),--this.size,0))},tt.prototype.get=function(t){var e=this.__data__,r=ot(e,t);return r<0?void 0:e[r][1]},tt.prototype.has=function(t){return ot(this.__data__,t)>-1},tt.prototype.set=function(t,e){var r=this.__data__,i=ot(r,t);return i<0?(++this.size,r.push([t,e])):r[i][1]=e,this},et.prototype.clear=function(){this.size=0,this.__data__={hash:new K,map:new(Q||tt),string:new K}},et.prototype.delete=function(t){var e=dt(this,t).delete(t);return this.size-=e?1:0,e},et.prototype.get=function(t){return dt(this,t).get(t)},et.prototype.has=function(t){return dt(this,t).has(t)},et.prototype.set=function(t,e){var r=dt(this,t),i=r.size;return r.set(t,e),this.size+=r.size==i?0:1,this},rt.prototype.clear=function(){this.__data__=new tt,this.size=0},rt.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},rt.prototype.get=function(t){return this.__data__.get(t)},rt.prototype.has=function(t){return this.__data__.has(t)},rt.prototype.set=function(t,e){var r=this.__data__;if(r instanceof tt){var i=r.__data__;if(!Q||i.length<199)return i.push([t,e]),this.size=++r.size,this;r=this.__data__=new et(i)}return r.set(t,e),this.size=r.size,this};function at(t){return null==t?void 0===t?g:c:X&&X in Object(t)?function(t){var e=C.call(t,X),r=t[X];try{t[X]=void 0;var i=!0}catch(t){}var n=$.call(t);return i&&(e?t[X]=r:delete t[X]),n}(t):function(t){return $.call(t)}(t)}function lt(t){return At(t)&&at(t)==o}function ct(t,e,r,i,n){t!==e&&function(t,e,r){for(var i=-1,n=Object(t),o=r(t),s=o.length;s--;){var a=o[++i];if(!1===e(n[a],a,n))break}}(e,(function(o,s){if(n||(n=new rt),Et(o))!function(t,e,r,i,n,o,s){var a=pt(t,r),l=pt(e,r),c=s.get(l);if(c)it(t,r,c);else{var d,g,h,f,p,m=o?o(a,l,r+"",t,e,s):void 0,x=void 0===m;if(x){var b=yt(l),y=!b&&wt(l),v=!b&&!y&&Ot(l);m=l,b||y||v?yt(a)?m=a:At(p=a)&&vt(p)?m=function(t,e){var r=-1,i=t.length;for(e||(e=Array(i));++r<i;)e[r]=t[r];return e}(a):y?(x=!1,m=function(t,e){return t.slice()}(l)):v?(x=!1,f=new(h=(d=l).buffer).constructor(h.byteLength),new U(f).set(new U(h)),g=f,m=new d.constructor(g,d.byteOffset,d.length)):m=[]:function(t){if(!At(t)||at(t)!=u)return!1;var e=M(t);if(null===e)return!0;var r=C.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&F.call(r)==k}(l)||bt(l)?(m=a,bt(a)?m=function(t){return function(t,e,r,i){var n=!r;r||(r={});for(var o=-1,s=e.length;++o<s;){var a=e[o],l=void 0;void 0===l&&(l=t[a]),n?st(r,a,l):nt(r,a,l)}return r}(t,Tt(t))}(a):Et(a)&&!Nt(a)||(m=function(t){return"function"!=typeof t.constructor||ft(t)?{}:H(M(t))}(l))):x=!1}x&&(s.set(l,m),n(m,l,i,o,s),s.delete(l)),it(t,r,m)}}(t,e,s,r,ct,i,n);else{var a=i?i(pt(t,s),o,s+"",t,e,n):void 0;void 0===a&&(a=o),it(t,s,a)}}),Tt)}var ut=G?function(t,e){return G(t,"toString",{configurable:!0,enumerable:!1,value:(r=e,function(){return r}),writable:!0});var r}:St;function dt(t,e){var r,i,n=t.__data__;return("string"==(i=typeof(r=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==r:null===r)?n["string"==typeof e?"string":"hash"]:n.map}function gt(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!Et(t)||function(t){return!!D&&D in t}(t))&&(Nt(t)?z:h).test(function(t){if(null!=t){try{return F.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}(r)?r:void 0}function ht(t,e){var r=typeof t;return!!(e=null==e?n:e)&&("number"==r||"symbol"!=r&&f.test(t))&&t>-1&&t%1==0&&t<e}function ft(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||S)}function pt(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var mt=function(t){var e=0,r=0;return function(){var i=Z(),n=16-(i-r);if(r=i,n>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(ut);function xt(t,e){return t===e||t!=t&&e!=e}var bt=lt(function(){return arguments}())?lt:function(t){return At(t)&&C.call(t,"callee")&&!R.call(t,"callee")},yt=Array.isArray;function vt(t){return null!=t&&_t(t.length)&&!Nt(t)}var wt=q||function(){return!1};function Nt(t){if(!Et(t))return!1;var e=at(t);return e==a||e==l||e==s||e==d}function _t(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}function Et(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function At(t){return null!=t&&"object"==typeof t}var Ot=T?function(t){return function(e){return t(e)}}(T):function(t){return At(t)&&_t(t.length)&&!!p[at(t)]};function Tt(t){return vt(t)?function(t,e){var r=yt(t),i=!r&&bt(t),n=!r&&!i&&wt(t),o=!r&&!i&&!n&&Ot(t),s=r||i||n||o,a=s?function(t,e){for(var r=-1,i=Array(t);++r<t;)i[r]=e(r);return i}(t.length,String):[],l=a.length;for(var c in t)!e&&!C.call(t,c)||s&&("length"==c||n&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ht(c,l))||a.push(c);return a}(t,!0):function(t){if(!Et(t))return function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}(t);var e=ft(t),r=[];for(var i in t)("constructor"!=i||!e&&C.call(t,i))&&r.push(i);return r}(t)}var jt,Pt=(jt=function(t,e,r){ct(t,e,r)},function(t,e){return mt(function(t,e,r){return e=Y(void 0===e?t.length-1:e,0),function(){for(var i=arguments,n=-1,o=Y(i.length-e,0),s=Array(o);++n<o;)s[n]=i[e+n];n=-1;for(var a=Array(e+1);++n<e;)a[n]=i[n];return a[e]=r(s),function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}(t,this,a)}}(t,e,St),t+"")}((function(t,e){var r=-1,i=e.length,n=i>1?e[i-1]:void 0,o=i>2?e[2]:void 0;for(n=jt.length>3&&"function"==typeof n?(i--,n):void 0,o&&function(t,e,r){if(!Et(r))return!1;var i=typeof e;return!!("number"==i?vt(r)&&ht(e,r.length):"string"==i&&e in r)&&xt(r[e],t)}(e[0],e[1],o)&&(n=i<3?void 0:n,i=1),t=Object(t);++r<i;){var s=e[r];s&&jt(t,s,r)}return t})));function St(t){return t}t.exports=Pt},153:t=>{const e=/^[-+]?0x[a-fA-F0-9]+$/,r=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const i={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};t.exports=function(t,n={}){if(n=Object.assign({},i,n),!t||"string"!=typeof t)return t;let o=t.trim();if(void 0!==n.skipLike&&n.skipLike.test(o))return t;if(n.hex&&e.test(o))return Number.parseInt(o,16);{const e=r.exec(o);if(e){const r=e[1],i=e[2];let a=(s=e[3])&&-1!==s.indexOf(".")?("."===(s=s.replace(/0+$/,""))?s="0":"."===s[0]?s="0"+s:"."===s[s.length-1]&&(s=s.substr(0,s.length-1)),s):s;const l=e[4]||e[6];if(!n.leadingZeros&&i.length>0&&r&&"."!==o[2])return t;if(!n.leadingZeros&&i.length>0&&!r&&"."!==o[1])return t;{const e=Number(o),s=""+e;return-1!==s.search(/[eE]/)||l?n.eNotation?e:t:-1!==o.indexOf(".")?"0"===s&&""===a||s===a||r&&s==="-"+a?e:t:i?a===s||r+a===s?e:t:o===s||o===r+s?e:t}}return t}var s}}},e={};function r(i){var n=e[i];if(void 0!==n)return n.exports;var o=e[i]={id:i,loaded:!1,exports:{}};return t[i](o,o.exports,r),o.loaded=!0,o.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var i in e)r.o(e,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var i={};return(()=>{"use strict";r.d(i,{default:()=>c});var t=r(932),e=r(378),n=r.n(e);const o=[{id:"boi",region:"wr"},{id:"byz",region:"wr"},{id:"eka",region:"wr"},{id:"fgz",region:"wr"},{id:"ggw",region:"wr"},{id:"hnx",region:"wr"},{id:"lkn",region:"wr"},{id:"tfx",region:"wr"},{id:"vef",region:"wr"},{id:"mfr",region:"wr"},{id:"mso",region:"wr"},{id:"mtr",region:"wr"},{id:"lox",region:"wr"},{id:"pdt",region:"wr"},{id:"pqr",region:"wr"},{id:"pih",region:"wr"},{id:"psr",region:"wr"},{id:"rev",region:"wr"},{id:"sto",region:"wr"},{id:"slc",region:"wr"},{id:"sgx",region:"wr"},{id:"sew",region:"wr"},{id:"otx",region:"wr"},{id:"twc",region:"wr"},{id:"abr",region:"cr"},{id:"apx",region:"cr"},{id:"arx",region:"cr"},{id:"bis",region:"cr"},{id:"bou",region:"cr"},{id:"cys",region:"cr"},{id:"ddc",region:"cr"},{id:"dlh",region:"cr"},{id:"dmx",region:"cr"},{id:"dtx",region:"cr"},{id:"dvn",region:"cr"},{id:"eax",region:"cr"},{id:"fgf",region:"cr"},{id:"fsd",region:"cr"},{id:"gid",region:"cr"},{id:"gjt",region:"cr"},{id:"gld",region:"cr"},{id:"grb",region:"cr"},{id:"grr",region:"cr"},{id:"ict",region:"cr"},{id:"ilx",region:"cr"},{id:"ind",region:"cr"},{id:"iwx",region:"cr"},{id:"jkl",region:"cr"},{id:"lbf",region:"cr"},{id:"lmk",region:"cr"},{id:"lot",region:"cr"},{id:"lsx",region:"cr"},{id:"mkx",region:"cr"},{id:"mpx",region:"cr"},{id:"mqt",region:"cr"},{id:"oax",region:"cr"},{id:"pah",region:"cr"},{id:"pub",region:"cr"},{id:"riw",region:"cr"},{id:"sgf",region:"cr"},{id:"top",region:"cr"},{id:"unr",region:"cr"},{id:"akq",region:"er"},{id:"aly",region:"er"},{id:"bgm",region:"er"},{id:"box",region:"er"},{id:"btv",region:"er"},{id:"buf",region:"er"},{id:"cae",region:"er"},{id:"car",region:"er"},{id:"chs",region:"er"},{id:"cle",region:"er"},{id:"ctp",region:"er"},{id:"gsp",region:"er"},{id:"gyx",region:"er"},{id:"ilm",region:"er"},{id:"iln",region:"er"},{id:"lwx",region:"er"},{id:"mhx",region:"er"},{id:"okx",region:"er"},{id:"pbz",region:"er"},{id:"phi",region:"er"},{id:"rah",region:"er"},{id:"rlx",region:"er"},{id:"rnk",region:"er"},{id:"abq",region:"sr"},{id:"ama",region:"sr"},{id:"ewx",region:"sr"},{id:"bmx",region:"sr"},{id:"bro",region:"sr"},{id:"crp",region:"sr"},{id:"fwd",region:"sr"},{id:"epz",region:"sr"},{id:"hgx",region:"sr"},{id:"hun",region:"sr"},{id:"jan",region:"sr"},{id:"jax",region:"sr"},{id:"key",region:"sr"},{id:"lch",region:"sr"},{id:"lzk",region:"sr"},{id:"lub",region:"sr"},{id:"mlb",region:"sr"},{id:"meg",region:"sr"},{id:"mfl",region:"sr"},{id:"maf",region:"sr"},{id:"mob",region:"sr"},{id:"mrx",region:"sr"},{id:"ohx",region:"sr"},{id:"ffc",region:"sr"},{id:"oun",region:"sr"},{id:"sjt",region:"sr"},{id:"sju",region:"sr"},{id:"shv",region:"sr"},{id:"tae",region:"sr"},{id:"tbw",region:"sr"},{id:"tsa",region:"sr"},{id:"afc",region:"ar"},{id:"afg",region:"ar"},{id:"ajk",region:"ar"},{id:"hfo",region:"pr"},{id:"gum",region:"pr"},{id:"ppg",region:"pr"}],s=[{id:"cnrfc",region:"wr"},{id:"cbrfc",region:"wr"},{id:"nwrfc",region:"wr"},{id:"mbrfc",region:"cr"},{id:"ncrfc",region:"cr"},{id:"nerfc",region:"er"},{id:"marfc",region:"er"},{id:"ohrfc",region:"er"},{id:"aprfc",region:"ar"},{id:"wgrfc",region:"sr"},{id:"abrfc",region:"sr"},{id:"lmrfc",region:"sr"},{id:"serfc",region:"sr"}],a=[{id:"zla",region:"wr"},{id:"zlc",region:"wr"},{id:"zoa",region:"wr"},{id:"zse",region:"wr"},{id:"zau",region:"cr"},{id:"zdv",region:"cr"},{id:"zid",region:"cr"},{id:"zkc",region:"cr"},{id:"zmp",region:"cr"},{id:"zbw",region:"er"},{id:"zdc",region:"er"},{id:"zny",region:"er"},{id:"zob",region:"er"},{id:"zfw",region:"sr"},{id:"zhu",region:"sr"},{id:"zme",region:"sr"},{id:"ztl",region:"sr"},{id:"zjx",region:"sr"},{id:"zma",region:"sr"},{id:"zan",region:"ar"},{id:"zab",region:"sr"}];const l={cdataPropName:"_cData",format:!0,attributeNamePrefix:"@_",ignoreAttributes:!1};class c{constructor(t=["pih"]){this.wfos=t.map((t=>t.toLowerCase())),this.wxStorys={}}getPublishedUrl(t,e){let r="";return r={cr:"/source/@@@/wxstory/wxstory.xml",wr:"/source/@@@/WxStory/WeatherStory.xml",er:"/images/@@@/weatherStory/weatherstory.png",sr:"/source/@@@/graphicast/graphicast.xml"}[e].replace("@@@",t),r}getDefaultCmsImageUrl(t,e,r){return{cr:`/images/${t}/wxstory/Tab${r=String(r)}FileL.png`,wr:`/images/${t}/WxStory/WeatherStory${r}.png`,er:`/images/${t}/weatherStory/weatherstory.png`,sr:`/images/${t}/graphicast/${r}.png`}[e]}getCmsFileInfo(t){return{cr:{xmlFileName:"cms_publicdata+wxstory+wxstory.xml",imageFileName:"cms_images+wxstory+Tab###FileL.png"},wr:{xmlFileName:"cms_publicdata+WxStory+WeatherStory.xml",imageFileName:"cms_images+WxStory+WeatherStory###.png"},er:{xmlFileName:null,imageFileName:"cms_images+weatherStory+weatherstory.png"},sr:{xmlFileName:"cms_publicdata+graphicast+graphicast.xml",imageFileName:"cms_images+graphicast+###.png"}}[t]}async load(t){let e=(i=t,[...o,...s,...a].find((t=>t.id===i.toLowerCase()))||!1).region,r=this.getPublishedUrl(t,e);var i;if("er"==this.region){let e=new u;return e.addStory({FullImage:r,EndTime:parseInt((new Date).getTime()/1e3)+500}),await new Promise(((r,i)=>r({wfo:t,wxstory:e})))}try{const e=await fetch(r);if(200!==e.status)return console.error(`Query of Weather Story xml file failed at URL: ${r}`),await new Promise(((e,r)=>r({wfo:t,wxstory:null})));{let r=await e.text(),i=new u(r);return await new Promise(((e,r)=>e({wfo:t,wxstory:i})))}}catch(e){return console.error(`Query of Weather Story xml file failed at URL: ${r}`),console.error(e),await new Promise(((e,r)=>r({wfo:t,wxstory:null})))}}async loadAll(){let t=this.wfos.map((t=>this.load(t)));return await Promise.all(t).then((t=>{t.forEach((t=>{this.wxStorys[t.wfo]=t.wxstory}))})),this.wxStorys}getAllWxStorys(){return this.wxStorys}}class u{constructor(t={}){let e={head:{product:{"creation-date":(new Date).toISOString(),"@_concise-name":"graphicast"},source:{credit:"","production-center":""}},graphicasts:{graphicast:[]}};n()(this,e),this.parseXMLFile(t)}parseXMLFile(e){let r=new t.XMLParser(l).parse(e);n()(this,r.xml),this.graphicasts.graphicast=this.graphicasts.graphicast.map((t=>new d(t)))}getStory(t){if(this.hasStory(t))return this.graphicasts.graphicast[t];throw new Error(`No weather story in position ${t}`)}hasStory(t){return this.getStoryCount()-1>=t}getAllStorys(){return this.graphicasts.graphicast}getActiveAndScheduledStorys(){return this.getAllStorys().filter((t=>t.isActive()||t.isScheduled()))}getActiveStorys(){return this.getAllStorys().filter((t=>t.isActive()))}getActiveStorys(){return this.getAllStorys().filter((t=>t.isScheduled()))}getStoryCount(){return this.graphicasts.graphicast.length}getUpdateDate(){return new Date(this.head.product["creation-date"])}}class d{constructor(t){return t.hasOwnProperty("title")&&"string"==typeof t.title&&(t.title={_cData:t.title}),t.hasOwnProperty("description")&&"string"==typeof t.description&&(t.description={_cData:t.description}),n()(this,{Office:"",cwa_center_lat:"",cwa_center_lon:"",StartTime:0,EndTime:0,graphicNumber:"",order:0,radar:0,FrontPage:!1,title:{_cData:""},description:{_cData:""},WebURL:"",FullImage:"",SmallImage:"",Update:null},t),new Proxy(this,{set:(t,e)=>("Update"!==e&&t.setUpdate(),!0)})}getDescription(){return this.description._cData}getTitle(){return this.title._cData}getStartDate(){return new Date(1e3*this.StartTime)}getEndDate(){return new Date(1e3*this.EndTime)}getRadar(){return Boolean(this.radar)}isActive(){let t=new Date;return t<=this.getEndDate()&&t>=this.getStartDate()}isScheduled(){return new Date<this.getStartDate()}isExpired(){return new Date>this.getEndDate()}getStatus(){return this.isExpired()?"Expired":this.isActive()?"Active":this.isScheduled()?"Scheduled":""}getFullImageFullUrl(){return`${this.FullImage}`}getCacheBustedImageFullUrl(){return`${this.getFullImageFullUrl()}?_=${parseInt(1e8*Math.random())}`}setUpdate(){this.Update=parseInt(+new Date/1e3)}}})(),i.default})()));